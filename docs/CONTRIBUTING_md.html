<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ruby LSP documentation</title>

  <script type="text/javascript">
    var rdoc_rel_prefix = "./";
    var index_rel_prefix = "./";
  </script>

  <script src="./js/search_index.js" defer></script>
  <script src="./js/snapper.js" defer></script>
  <link href="./css/snapper.css" rel="stylesheet">
</head>

  <body>
    <div id="main-container">
  <nav id="nav">
  <h3 class="title">Ruby LSP documentation</h3>

  <input id="side-search" type="text" placeholder="Search docs (CMD/CTRL + K)"></input>

  <ul id="navigation-list">
    <li id="getting-started"><a href="./index.html">Getting started</a></li>
    <p class="separator">PAGES</p>
    <li class="index-entry">
  <a href="./ADDONS_md.html">
    ADDONS
  </a>
</li>
<li class="index-entry">
  <a href="./CODE_OF_CONDUCT_md.html">
    CODE_OF_CONDUCT
  </a>
</li>
<li class="index-entry">
  <a href="./CONTRIBUTING_md.html">
    CONTRIBUTING
  </a>
</li>
<li class="index-entry">
  <a href="./DESIGN_AND_ROADMAP_md.html">
    DESIGN_AND_ROADMAP
  </a>
</li>
<li class="index-entry">
  <a href="./EDITORS_md.html">
    EDITORS
  </a>
</li>
<li class="index-entry">
  <a href="./README_md.html">
    README
  </a>
</li>
<li class="index-entry">
  <a href="./SEMANTIC_HIGHLIGHTING_md.html">
    SEMANTIC_HIGHLIGHTING
  </a>
</li>
<li class="index-entry">
  <a href="./TROUBLESHOOTING_md.html">
    TROUBLESHOOTING
  </a>
</li>
<li class="index-entry">
  <a href="./VERSION_MANAGERS_md.html">
    VERSION_MANAGERS
  </a>
</li>

    <p class="separator">CODE</p>
    <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop.html">RuboCop</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop/Cop.html">Cop</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop/Cop/RubyLsp.html">RubyLsp</a></summary>
    <ul>
      <li class="index-entry"><a href="./RuboCop/Cop/RubyLsp/UseLanguageServerAliases.html">UseLanguageServerAliases</a></li><li class="index-entry"><a href="./RuboCop/Cop/RubyLsp/UseRegisterWithHandlerMethod.html">UseRegisterWithHandlerMethod</a></li>
    </ul>
  </details>
</li>

    </ul>
  </details>
</li>

    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer.html">RubyIndexer</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/ClassesAndModulesTest.html">ClassesAndModulesTest</a></li><li class="index-entry"><a href="./RubyIndexer/Configuration.html">Configuration</a></li><li class="index-entry"><a href="./RubyIndexer/ConfigurationTest.html">ConfigurationTest</a></li><li class="index-entry"><a href="./RubyIndexer/ConstantTest.html">ConstantTest</a></li><li class="index-entry"><a href="./RubyIndexer/DeclarationListener.html">DeclarationListener</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/Entry.html">Entry</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/Entry/Accessor.html">Accessor</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Alias.html">Alias</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/BlockParameter.html">BlockParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Class.html">Class</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Constant.html">Constant</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Include.html">Include</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/InstanceVariable.html">InstanceVariable</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/KeywordParameter.html">KeywordParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/KeywordRestParameter.html">KeywordRestParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Member.html">Member</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Method.html">Method</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/MethodAlias.html">MethodAlias</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Module.html">Module</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/ModuleOperation.html">ModuleOperation</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Namespace.html">Namespace</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/OptionalKeywordParameter.html">OptionalKeywordParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/OptionalParameter.html">OptionalParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Parameter.html">Parameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Prepend.html">Prepend</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/RequiredParameter.html">RequiredParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/RestParameter.html">RestParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Signature.html">Signature</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/SingletonClass.html">SingletonClass</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/UnresolvedAlias.html">UnresolvedAlias</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/UnresolvedMethodAlias.html">UnresolvedMethodAlias</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Visibility.html">Visibility</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/Index.html">Index</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/Index/NonExistingNamespaceError.html">NonExistingNamespaceError</a></li><li class="index-entry"><a href="./RubyIndexer/Index/UnresolvableAliasError.html">UnresolvableAliasError</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyIndexer/IndexTest.html">IndexTest</a></li><li class="index-entry"><a href="./RubyIndexer/IndexablePath.html">IndexablePath</a></li><li class="index-entry"><a href="./RubyIndexer/InstanceVariableTest.html">InstanceVariableTest</a></li><li class="index-entry"><a href="./RubyIndexer/Location.html">Location</a></li><li class="index-entry"><a href="./RubyIndexer/MethodTest.html">MethodTest</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/PrefixTree.html">PrefixTree</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/PrefixTree/Node.html">Node</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyIndexer/PrefixTreeTest.html">PrefixTreeTest</a></li><li class="index-entry"><a href="./RubyIndexer/RBSIndexer.html">RBSIndexer</a></li><li class="index-entry"><a href="./RubyIndexer/RBSIndexerTest.html">RBSIndexerTest</a></li><li class="index-entry"><a href="./RubyIndexer/TestCase.html">TestCase</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp.html">RubyLsp</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Addon.html">Addon</a></li><li class="index-entry"><a href="./RubyLsp/BaseServer.html">BaseServer</a></li><li class="index-entry"><a href="./RubyLsp/CheckDocs.html">CheckDocs</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Document.html">Document</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Document/LanguageId.html">LanguageId</a></li><li class="index-entry"><a href="./RubyLsp/Document/Scanner.html">Scanner</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ERBDocument.html">ERBDocument</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ERBDocument/ERBScanner.html">ERBScanner</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Error.html">Error</a></li><li class="index-entry"><a href="./RubyLsp/GlobalState.html">GlobalState</a></li><li class="index-entry"><a href="./RubyLsp/InlineTypeAssertions.html">InlineTypeAssertions</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Listeners.html">Listeners</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Listeners/CodeLens.html">CodeLens</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Completion.html">Completion</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Definition.html">Definition</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentHighlight.html">DocumentHighlight</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentLink.html">DocumentLink</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentSymbol.html">DocumentSymbol</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/FoldingRanges.html">FoldingRanges</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/InlayHints.html">InlayHints</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/SemanticHighlighting.html">SemanticHighlighting</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/SignatureHelp.html">SignatureHelp</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Message.html">Message</a></li><li class="index-entry"><a href="./RubyLsp/NodeContext.html">NodeContext</a></li><li class="index-entry"><a href="./RubyLsp/Notification.html">Notification</a></li><li class="index-entry"><a href="./RubyLsp/ParameterScope.html">ParameterScope</a></li><li class="index-entry"><a href="./RubyLsp/Request.html">Request</a></li><li class="index-entry"><a href="./RubyLsp/RequestConfig.html">RequestConfig</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests.html">Requests</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/CodeActionResolve.html">CodeActionResolve</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/CodeActionResolve/CodeActionError.html">CodeActionError</a></li><li class="index-entry"><a href="./RubyLsp/Requests/CodeActionResolve/Error.html">Error</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/CodeActions.html">CodeActions</a></li><li class="index-entry"><a href="./RubyLsp/Requests/CodeLens.html">CodeLens</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Completion.html">Completion</a></li><li class="index-entry"><a href="./RubyLsp/Requests/CompletionResolve.html">CompletionResolve</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Definition.html">Definition</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Diagnostics.html">Diagnostics</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentHighlight.html">DocumentHighlight</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentLink.html">DocumentLink</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentSymbol.html">DocumentSymbol</a></li><li class="index-entry"><a href="./RubyLsp/Requests/FoldingRanges.html">FoldingRanges</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Formatting.html">Formatting</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Formatting/Error.html">Error</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/Requests/InlayHints.html">InlayHints</a></li><li class="index-entry"><a href="./RubyLsp/Requests/OnTypeFormatting.html">OnTypeFormatting</a></li><li class="index-entry"><a href="./RubyLsp/Requests/PrepareTypeHierarchy.html">PrepareTypeHierarchy</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Request.html">Request</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Request/InvalidFormatter.html">InvalidFormatter</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/SelectionRanges.html">SelectionRanges</a></li><li class="index-entry"><a href="./RubyLsp/Requests/SemanticHighlighting.html">SemanticHighlighting</a></li><li class="index-entry"><a href="./RubyLsp/Requests/ShowSyntaxTree.html">ShowSyntaxTree</a></li><li class="index-entry"><a href="./RubyLsp/Requests/SignatureHelp.html">SignatureHelp</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Support.html">Support</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Support/Annotation.html">Annotation</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/Common.html">Common</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/Formatter.html">Formatter</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/InternalRuboCopError.html">InternalRuboCopError</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopDiagnostic.html">RuboCopDiagnostic</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopFormatter.html">RuboCopFormatter</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Support/RuboCopRunner.html">RuboCopRunner</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopRunner/ConfigurationError.html">ConfigurationError</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/Support/SelectionRange.html">SelectionRange</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/Sorbet.html">Sorbet</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/SyntaxTreeFormatter.html">SyntaxTreeFormatter</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/TypeHierarchySupertypes.html">TypeHierarchySupertypes</a></li><li class="index-entry"><a href="./RubyLsp/Requests/WorkspaceSymbol.html">WorkspaceSymbol</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders.html">ResponseBuilders</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/CollectionResponseBuilder.html">CollectionResponseBuilder</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders/DocumentSymbol.html">DocumentSymbol</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/DocumentSymbol/SymbolHierarchyRoot.html">SymbolHierarchyRoot</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/ResponseBuilders/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/ResponseBuilder.html">ResponseBuilder</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting.html">SemanticHighlighting</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/SemanticToken.html">SemanticToken</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/SemanticTokenEncoder.html">SemanticTokenEncoder</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/UndefinedTokenType.html">UndefinedTokenType</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SignatureHelp.html">SignatureHelp</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Result.html">Result</a></li><li class="index-entry"><a href="./RubyLsp/RubyDocument.html">RubyDocument</a></li><li class="index-entry"><a href="./RubyLsp/Server.html">Server</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/SetupBundler.html">SetupBundler</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/SetupBundler/BundleInstallFailure.html">BundleInstallFailure</a></li><li class="index-entry"><a href="./RubyLsp/SetupBundler/BundleNotLocked.html">BundleNotLocked</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Store.html">Store</a></li><li class="index-entry"><a href="./RubyLsp/TestHelper.html">TestHelper</a></li><li class="index-entry"><a href="./RubyLsp/TypeInferrer.html">TypeInferrer</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./URI.html">URI</a></summary>
    <ul>
      <li class="index-entry"><a href="./URI/Generic.html">Generic</a></li><li class="index-entry"><a href="./URI/Source.html">Source</a></li>
    </ul>
  </details>
</li>

  </ul>
</nav>

  <article>
<h1 id="label-CONTRIBUTING"><a href="CONTRIBUTING_md.html">CONTRIBUTING</a><span><a href="#label-CONTRIBUTING">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Testing+changes">Testing changes<span><a href="#label-Testing+changes">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Tracing+LSP+requests+and+responses">Tracing LSP requests and responses<span><a href="#label-Tracing+LSP+requests+and+responses">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>LSP server tracing (logging) can be controlled through the <code>ruby lsp.trace.server</code> config key in the <code>.vscode/settings.json</code> config file.</p>

<p>Possible values are:</p>
<ul><li>
<p><code>off</code>: no tracing</p>
</li><li>
<p><code>messages</code>: display requests and responses notifications</p>
</li><li>
<p><code>verbose</code>: display each request and response as JSON</p>
</li></ul>

<h3 id="label-Manually+testing+a+change">Manually testing a change<span><a href="#label-Manually+testing+a+change">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>There are a few options for manually testing changes to Ruby LSP:</p>

<p>You can test against Ruby LSP’s own code if using VS Code, and you have the <code>ruby-lsp</code> project open. Choose ‘Ruby LSP: Restart’ from the command menu and the VS Code extension will detect that you are working on <code>ruby-lsp</code>, and use the locally checked out code instead of the installed extension.</p>

<p>The other way is to use a separate project, and add a Gemfile entry pointing to your local checkout of <code>ruby-lsp</code>, e.g.:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;ruby-lsp&quot;</span>, <span class="ruby-value">path:</span> <span class="ruby-string">&quot;../../Shopify/ruby-lsp&quot;</span>
</pre>

<p>With both approaches, there is a risk of ‘breaking’ your local development experience, so keep an eye on the Ruby LSP output panel for exceptions as your make changes.</p>

<h3 id="label-Running+the+test+suite">Running the test suite<span><a href="#label-Running+the+test+suite">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The test suite can be executed by running</p>

<pre># The default runner
bin/test
# or the spec reporter
SPEC_REPORTER=1 bin/test
# Warnings are turned off by default. If you wish to see warnings use
VERBOSE=1 bin/test
# Run a single test like this: &quot;bin/test my_test.rb test_name_regex&quot;, e.g.
bin/test test/requests/diagnostics_expectations_test.rb test_diagnostics__def_bad_formatting</pre>

<h3 id="label-Expectation+testing">Expectation testing<span><a href="#label-Expectation+testing">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>To simplify the way we run tests over different pieces of Ruby code, we use a custom expectations test framework against a set of Ruby fixtures.</p>

<p>All fixtures are defined under <code>test/fixtures</code>. By default, every request will be executed against every fixture and the test framework will assert that nothing was raised to verify if all requests succeed in processing all fixtures.</p>

<p>Expectations can be added on a per request and per fixture basis. For example, we can have expectations for semantic highlighting for a fixture called <code>foo.rb</code>, but no expectations for the same fixture for any other requests.</p>

<p>We define expectations as <code>.exp</code> files, of which there are two variants: - <code>.exp.rb</code>, to indicate the resulting code after an operation - <code>.exp.json</code>, consisting of a <code>result</code>, and an optional set of input <code>params</code></p>

<p>To add a new test scenario</p>
<ol><li>
<p>Add a new fixture <code>my_fixture.rb</code> file under <code>test/fixtures</code></p>
</li><li>
<p>For applicable requests, add expectation files related to this fixture. For example, <code>test/expectations/semantic_highlighting/my_fixture.exp.json</code></p>
</li></ol>

<p>To add a new expectations test runner for a new request handler:</p>
<ul><li>
<p>Add a new file under <code>test/requests/MY_REQUEST_expectations_test.rb</code></p>
</li></ul>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;test_helper&quot;</span>
<span class="ruby-identifier">require_relative</span> <span class="ruby-string">&quot;support/expectations_test_runner&quot;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyRequestExpectationsTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ExpectationsTestRunner</span>
  <span class="ruby-comment"># The first argument is the fully qualified name of the request class</span>
  <span class="ruby-comment"># The second argument is the folder name where the expectation files are</span>
  <span class="ruby-identifier">expectations_tests</span> <span class="ruby-constant">RubyLsp</span><span class="ruby-operator">::</span><span class="ruby-constant">Requests</span><span class="ruby-operator">::</span><span class="ruby-constant">MyRequest</span>, <span class="ruby-string">&quot;my_request&quot;</span>
<span class="ruby-keyword">end</span>
</pre>
<ul><li>
<p>(optional) The default behaviour of running tests is not always enough for every request. You may need to override the base run and assert method to achieve the right behaviour. See <code>diagnostics_expectations_test.rb</code> for an example</p>
</li></ul>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;test_helper&quot;</span>
<span class="ruby-identifier">require_relative</span> <span class="ruby-string">&quot;support/expectations_test_runner&quot;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyRequestExpectationsTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ExpectationsTestRunner</span>
  <span class="ruby-identifier">expectations_tests</span> <span class="ruby-constant">RubyLsp</span><span class="ruby-operator">::</span><span class="ruby-constant">Requests</span><span class="ruby-operator">::</span><span class="ruby-constant">MyRequest</span>, <span class="ruby-string">&quot;my_request&quot;</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">run_expectations</span>(<span class="ruby-identifier">source</span>)
    <span class="ruby-comment"># Run your request for the given source</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assert_expectations</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">expected</span>)
    <span class="ruby-comment"># Invoke run_expectations and then customize how to assert the correct responses</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Debugging+with+VS+Code">Debugging with VS Code<span><a href="#label-Debugging+with+VS+Code">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h2 id="label-Debugging+Tests">Debugging Tests<span><a href="#label-Debugging+Tests">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ol><li>
<p>Open the test file</p>
</li><li>
<p>Set breakpoints in the code as desired</p>
</li><li>
<p>Click the debug button on top of test examples</p>
</li></ol>

<h2 id="label-Live+debugging">Live debugging<span><a href="#label-Live+debugging">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ol><li>
<p>Under <code>Run and Debug</code>, select <code>Run extension</code> and click the start button (or press F5)</p>
</li><li>
<p>The extension host window opened will be running the development version of the VS Code extension. Putting break points in the extension code will allow debugging</p>
</li><li>
<p>If you wish to debug the server process, go under <code>Run and Debug</code> in the extension host window, select <code>Attach to existing server</code> and click the start button (or press F5)</p>
</li><li>
<p>Add breakpoints and perform the actions necessary for triggering the requests you wish to debug</p>
</li></ol>

<h2 id="label-Screen+Captures">Screen Captures<span><a href="#label-Screen+Captures">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>We include animated screen captures to illustrate Ruby LSP features. For recording new captures, use <a href="https://www.cockos.com/licecap/">LICEcap</a>. For consistency, install the Ruby LSP profile included with this repo. Configure LICEcap to record at 24fps, at 640 x 480. If appropriate, you can adjust the height of the capture, but keep the width at 640.</p>

<h2 id="label-Spell+Checking">Spell Checking<span><a href="#label-Spell+Checking">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>VS Code users will be prompted to enable the <a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker">Code Spell Checker</a> extension. By default this will be enabled for all workspaces, but you can choose to selectively enable or disable it per workspace.</p>

<p>If you introduce a word which the spell checker does not recognize, you can add it to the <code>cspell.json</code> configuration alongside your PR.</p>
</article>
  <div class="right-section">
  <nav class="right-nav">
    <span id="right-side-bar-title" class="right-side-bar-title">On this page</span>
      <ul>
        <li> <a href=#>CONTRIBUTING.md</a></li>

            <div class="nav-section">

              <ul class="link-list" role="directory">
                                    <li>
                      <details open>
                        <summary>                <a href="#label-CONTRIBUTING">CONTRIBUTING</a>
</summary>
                        <ul class="link-list" role="directory">
                                              <li>
                      <details open>
                        <summary>                <a href="#label-Testing+changes">Testing changes</a>
</summary>
                        <ul class="link-list" role="directory">
                                              <li>                <a href="#label-Tracing+LSP+requests+and+responses">Tracing LSP requests and responses</a>
                    <li>                <a href="#label-Manually+testing+a+change">Manually testing a change</a>
                    <li>                <a href="#label-Running+the+test+suite">Running the test suite</a>
                    <li>                <a href="#label-Expectation+testing">Expectation testing</a>

                        </ul>
                      </details>
                    </li>
                    <li>                <a href="#label-Debugging+with+VS+Code">Debugging with VS Code</a>
                    <li>                <a href="#label-Debugging+Tests">Debugging Tests</a>
                    <li>                <a href="#label-Live+debugging">Live debugging</a>
                    <li>                <a href="#label-Screen+Captures">Screen Captures</a>
                    <li>                <a href="#label-Spell+Checking">Spell Checking</a>

                        </ul>
                      </details>
                    </li>

              </ul>
            </div>
  </nav>
</div>

</div>

<div id="search-modal">
  <div id="search-modal-content">
    <input id="search-modal-input" type="text" placeholder="Search"></input>
    <ul id="search-results"></ul>
  </div>
</div>


    <footer>
      <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.6.3.1
    </footer>
  </body>
</html>
